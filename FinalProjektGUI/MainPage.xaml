<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
             x:Class="FinalProjektGUI.MainPage"
             Title="Solar Power Plant GUI">

    <Grid Padding="10" RowSpacing="10" ColumnSpacing="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Combined Control Panel -->
        <Frame Grid.Row="0" BorderColor="Gray" CornerRadius="5" Padding="8">
            <Grid ColumnSpacing="8" RowSpacing="5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" Text="COM Port:" VerticalOptions="Center" FontSize="13"/>
                <Picker Grid.Column="1" x:Name="ComPortPicker" VerticalOptions="Center" FontSize="13"/>
                <Button Grid.Column="2" x:Name="ConnectButton" Text="Connect" Clicked="OnConnectClicked" WidthRequest="85" FontSize="12" Padding="5,3"/>
                <Button Grid.Column="3" x:Name="DisconnectButton" Text="Disconnect" Clicked="OnDisconnectClicked" WidthRequest="95" FontSize="12" Padding="5,3" IsEnabled="False"/>
                
                <BoxView Grid.Column="4" WidthRequest="1" BackgroundColor="Gray"/>
                
                <Label Grid.Column="5" Text="Breaker:" VerticalOptions="Center" FontAttributes="Bold" FontSize="13" Margin="5,0,0,0"/>
                <Switch Grid.Column="6" x:Name="BreakerToggle" IsToggled="True" Toggled="OnBreakerToggled" VerticalOptions="Center" Scale="0.85"/>
                
                <BoxView Grid.Column="7" WidthRequest="1" BackgroundColor="Gray"/>
                
                <Label Grid.Column="8" Text="Max Discharge:" VerticalOptions="Center" FontAttributes="Bold" FontSize="13" Margin="5,0,3,0"/>
                <Entry Grid.Column="9" x:Name="MaxDischargeEntry" Text="1.5" WidthRequest="55" VerticalOptions="Center" FontSize="13" Keyboard="Numeric" Unfocused="OnMaxDischargeUnfocused" HorizontalTextAlignment="Center"/>
                <Label Grid.Column="10" Text="mA" VerticalOptions="Center" FontSize="13" Margin="2,0,0,0"/>
                
                <BoxView Grid.Column="11" WidthRequest="1" BackgroundColor="Gray"/>
                
                <Label Grid.Column="12" Text="View Mode:" VerticalOptions="Center" FontAttributes="Bold" FontSize="13" Margin="5,0,5,0"/>
                <HorizontalStackLayout Grid.Column="13" Spacing="8" VerticalOptions="Center">
                    <RadioButton x:Name="MonitorModeRadio" Content="Monitor" IsChecked="True" CheckedChanged="OnViewModeChanged" GroupName="ViewMode" FontSize="13" Scale="0.9"/>
                    <RadioButton x:Name="GraphModeRadio" Content="Graph" CheckedChanged="OnViewModeChanged" GroupName="ViewMode" FontSize="13" Scale="0.9"/>
                </HorizontalStackLayout>
            </Grid>
        </Frame>

        <!-- Monitor View -->
        <Grid x:Name="MonitorView" Grid.Row="1" RowSpacing="10" ColumnSpacing="10" IsVisible="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Solar Output Panel -->
        <Frame Grid.Row="0" Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
            <Grid RowSpacing="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Label Grid.Row="0" Text="Solar Output" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center"/>
                <Label Grid.Row="1" x:Name="SolarOutputLabel" Text="0.000 V" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center"/>
            </Grid>
        </Frame>

        <!-- Battery Status Panel -->
        <Frame Grid.Row="0" Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
            <Grid RowSpacing="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Label Grid.Row="0" Text="Battery Status" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center"/>
                <Label Grid.Row="1" x:Name="BatteryVoltageLabel" Text="0.000 V" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center"/>
                <ProgressBar Grid.Row="2" x:Name="BatteryBar" Progress="0" ProgressColor="Green" HeightRequest="30" WidthRequest="150" HorizontalOptions="Center"/>
                <Label Grid.Row="3" x:Name="BatteryStatusLabel" Text="--- at 0 mA" FontSize="14" FontAttributes="Bold" HorizontalOptions="Center"/>
            </Grid>
        </Frame>

        <!-- Circuit Status Panel -->
        <Frame Grid.Row="0" Grid.Column="2" BorderColor="Gray" CornerRadius="5" Padding="10">
            <Grid RowSpacing="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Label Grid.Row="0" Text="Circuit Status" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center"/>
                <Label Grid.Row="1" x:Name="CircuitStatusLabel" Text="ON" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center" TextColor="Green"/>
                <Button Grid.Row="2" x:Name="ResetButton" Text="Reset Breaker" Clicked="OnResetBreakerClicked" HorizontalOptions="Center" WidthRequest="120"/>
            </Grid>
        </Frame>

        <!-- Parsed Data Display Panel -->
        <Frame Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" BorderColor="Gray" CornerRadius="5" Padding="10">
            <Grid RowSpacing="5" ColumnSpacing="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Text="Raw ADC Data" FontAttributes="Bold" FontSize="16" Grid.ColumnSpan="4"/>

                <!-- Packet Number -->
                <Label Grid.Row="1" Grid.Column="0" Text="Packet #:"/>
                <Label Grid.Row="1" Grid.Column="1" x:Name="PacketNumberLabel" Text="---" FontAttributes="Bold"/>

                <!-- ADC Values -->
                <Label Grid.Row="2" Grid.Column="0" Text="ADC0:"/>
                <Label Grid.Row="2" Grid.Column="1" x:Name="Adc0Label" Text="----"/>
                <Label Grid.Row="2" Grid.Column="2" Text="ADC1:"/>
                <Label Grid.Row="2" Grid.Column="3" x:Name="Adc1Label" Text="----"/>

                <Label Grid.Row="3" Grid.Column="0" Text="ADC2:"/>
                <Label Grid.Row="3" Grid.Column="1" x:Name="Adc2Label" Text="----"/>
                <Label Grid.Row="3" Grid.Column="2" Text="ADC3:"/>
                <Label Grid.Row="3" Grid.Column="3" x:Name="Adc3Label" Text="----"/>

                <Label Grid.Row="4" Grid.Column="0" Text="ADC4:"/>
                <Label Grid.Row="4" Grid.Column="1" x:Name="Adc4Label" Text="----"/>
                <Label Grid.Row="4" Grid.Column="2" Text="ADC5:"/>
                <Label Grid.Row="4" Grid.Column="3" x:Name="Adc5Label" Text="----"/>
            </Grid>
        </Frame>

        <!-- 4 Panel Row: LED Control, Total Load, Digital Inputs, Checksum -->
        <Grid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" ColumnSpacing="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LED Control Panel -->
            <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                <Grid RowSpacing="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Label Grid.Row="0" Text="LED Control" FontAttributes="Bold" FontSize="14" HorizontalOptions="Center"/>
                    
                    <VerticalStackLayout Grid.Row="1" Spacing="5">
                        <Label Text="Mode:" FontSize="12" HorizontalOptions="Center"/>
                        <Picker x:Name="LedModePicker" SelectedIndexChanged="OnLedModeChanged" HorizontalOptions="Center" WidthRequest="120">
                            <Picker.Items>
                                <x:String>Manual</x:String>
                                <x:String>Traffic</x:String>
                                <x:String>Christmas</x:String>
                            </Picker.Items>
                        </Picker>
                    </VerticalStackLayout>

                    <HorizontalStackLayout Grid.Row="2" Spacing="5" HorizontalOptions="Center">
                        <Label Text="Yellow" TextColor="Orange" FontSize="11" VerticalOptions="Center"/>
                        <Switch x:Name="Led2Switch" Toggled="OnLedToggled" VerticalOptions="Center" Scale="0.8"/>
                        <Label x:Name="YellowCurrentLabel" Text="0.0 mA" FontSize="10" VerticalOptions="Center" WidthRequest="45"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Grid.Row="3" Spacing="5" HorizontalOptions="Center">
                        <Label Text="Red" TextColor="Red" FontSize="11" VerticalOptions="Center" WidthRequest="45" HorizontalTextAlignment="End"/>
                        <Switch x:Name="Led3Switch" Toggled="OnLedToggled" VerticalOptions="Center" Scale="0.8"/>
                        <Label x:Name="RedCurrentLabel" Text="0.0 mA" FontSize="10" VerticalOptions="Center" WidthRequest="45"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Grid.Row="4" Spacing="5" HorizontalOptions="Center">
                        <Label Text="Green" TextColor="Green" FontSize="11" VerticalOptions="Center" WidthRequest="45" HorizontalTextAlignment="End"/>
                        <Switch x:Name="Led4Switch" Toggled="OnLedToggled" VerticalOptions="Center" Scale="0.8"/>
                        <Label x:Name="GreenCurrentLabel" Text="0.0 mA" FontSize="10" VerticalOptions="Center" WidthRequest="45"/>
                    </HorizontalStackLayout>
                </Grid>
            </Frame>

            <!-- Total Load Current Panel -->
            <Frame Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
                <Grid RowSpacing="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <Label Grid.Row="0" Text="Total Load" FontAttributes="Bold" FontSize="14" HorizontalOptions="Center"/>
                    <Label Grid.Row="1" x:Name="TotalLoadCurrentLabel" Text="0 mA" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Digital Inputs Panel -->
            <Frame Grid.Column="2" BorderColor="Gray" CornerRadius="5" Padding="10">
                <Grid RowSpacing="5" ColumnSpacing="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Text="Digital Inputs" FontAttributes="Bold" FontSize="14" Grid.ColumnSpan="4" HorizontalOptions="Center"/>
                    <Label Grid.Row="1" Grid.Column="0" Text="DI0:" FontSize="11"/>
                    <Label Grid.Row="1" Grid.Column="1" x:Name="Di0Label" Text="-" FontSize="11"/>
                    <Label Grid.Row="1" Grid.Column="2" Text="DI1:" FontSize="11"/>
                    <Label Grid.Row="1" Grid.Column="3" x:Name="Di1Label" Text="-" FontSize="11"/>

                    <Label Grid.Row="2" Grid.Column="0" Text="DI2:" FontSize="11"/>
                    <Label Grid.Row="2" Grid.Column="1" x:Name="Di2Label" Text="-" FontSize="11"/>
                    <Label Grid.Row="2" Grid.Column="2" Text="DI3:" FontSize="11"/>
                    <Label Grid.Row="2" Grid.Column="3" x:Name="Di3Label" Text="-" FontSize="11"/>
                </Grid>
            </Frame>

            <!-- Checksum Panel -->
            <Frame Grid.Column="3" BorderColor="Gray" CornerRadius="5" Padding="10">
                <Grid RowSpacing="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Text="Checksum" FontAttributes="Bold" FontSize="14" Grid.ColumnSpan="2" HorizontalOptions="Center"/>
                    <Label Grid.Row="1" Grid.Column="0" Text="Received:" FontSize="11"/>
                    <Label Grid.Row="1" Grid.Column="1" x:Name="ReceivedChecksumLabel" Text="---" FontSize="11"/>
                    <Label Grid.Row="2" Grid.Column="0" Text="Calculated:" FontSize="11"/>
                    <Label Grid.Row="2" Grid.Column="1" x:Name="CalculatedChecksumLabel" Text="---" FontSize="11"/>
                </Grid>
            </Frame>
        </Grid>

        <!-- Main Content Area (Scrolling Log) -->
        <Grid Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" RowSpacing="10">
            <!-- Scrolling Log -->
            <Frame BorderColor="Gray" CornerRadius="5" Padding="10">
                <Grid RowSpacing="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <Label Grid.Column="0" Text="Raw Data Log" FontAttributes="Bold" VerticalOptions="Center"/>
                        <HorizontalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Auto-scroll:" VerticalOptions="Center"/>
                            <Switch x:Name="AutoScrollSwitch" IsToggled="True" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                        <Button Grid.Column="2" Text="Clear" Clicked="OnClearLogClicked" WidthRequest="80"/>
                    </Grid>
                    
                    <ScrollView Grid.Row="1" x:Name="LogScrollView">
                        <Label x:Name="RawDataLog" FontFamily="Courier New" FontSize="12" LineBreakMode="WordWrap"/>
                    </ScrollView>
                </Grid>
            </Frame>
        </Grid>
        </Grid>
        <!-- End Monitor View -->

        <!-- Graph View -->
        <Grid x:Name="GraphView" Grid.Row="1" RowSpacing="10" IsVisible="False">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Time Window Selector -->
            <Frame Grid.Row="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="Time Window:" VerticalOptions="Center" FontAttributes="Bold"/>
                    <Picker x:Name="TimeWindowPicker" SelectedIndexChanged="OnTimeWindowChanged" WidthRequest="150">
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>10 seconds</x:String>
                                <x:String>30 seconds</x:String>
                                <x:String>1 minute</x:String>
                                <x:String>2 minutes</x:String>
                                <x:String>5 minutes</x:String>
                                <x:String>10 minutes</x:String>
                            </x:Array>
                        </Picker.ItemsSource>
                    </Picker>
                </HorizontalStackLayout>
            </Frame>

            <!-- Charts ScrollView -->
            <ScrollView Grid.Row="1">
                <VerticalStackLayout Spacing="15" Padding="10">
                    <!-- Combined Graphs at Top -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <!-- Combined Voltage Chart -->
                        <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Label Grid.Row="0" Text="Voltages (Combined)" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center"/>
                                <lvc:CartesianChart Grid.Row="1" x:Name="CombinedVoltageChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>

                        <!-- Combined Current Chart -->
                        <Frame Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Label Grid.Row="0" Text="Currents (Combined)" FontAttributes="Bold" FontSize="16" HorizontalOptions="Center"/>
                                <lvc:CartesianChart Grid.Row="1" x:Name="CombinedCurrentChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>
                    </Grid>

                    <!-- Voltage Charts -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <!-- Solar Output Chart -->
                        <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                    <Label Grid.Column="0" Text="Solar Output Voltage (0-3.5V)" FontAttributes="Bold" FontSize="16"/>
                                    <Button Grid.Column="1" Text="Clear" Clicked="OnClearSolarChart" WidthRequest="80"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="SolarChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>

                        <!-- Battery Voltage Chart -->
                        <Frame Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                                    <Label Grid.Column="0" Text="Battery Voltage (0-3.5V)" FontAttributes="Bold" FontSize="16"/>
                                    <Button Grid.Column="1" Text="Clear" Clicked="OnClearBatteryChart" WidthRequest="80"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="BatteryChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>
                    </Grid>

                    <!-- Current Charts Row 1 -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <!-- Total Load Current Chart -->
                        <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto">
                                    <Label Grid.Column="0" Text="Total Load Current (mA)" FontAttributes="Bold" FontSize="16"/>
                                    <Label Grid.Column="1" Text="Scale:" VerticalOptions="Center" Margin="0,0,5,0"/>
                                    <Picker Grid.Column="2" x:Name="TotalLoadScalePicker" SelectedIndexChanged="OnTotalLoadScaleChanged" WidthRequest="60">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>1</x:String>
                                                <x:String>2</x:String>
                                                <x:String>3</x:String>
                                                <x:String>4</x:String>
                                                <x:String>5</x:String>
                                                <x:String>6</x:String>
                                                <x:String>7</x:String>
                                                <x:String>8</x:String>
                                                <x:String>9</x:String>
                                                <x:String>10</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Button Grid.Column="3" Text="Clear" Clicked="OnClearTotalLoadChart" WidthRequest="80" Margin="10,0,0,0"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="TotalLoadChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>

                        <!-- Yellow LED Current Chart -->
                        <Frame Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto">
                                    <Label Grid.Column="0" Text="Yellow LED Current (mA)" FontAttributes="Bold" FontSize="16"/>
                                    <Label Grid.Column="1" Text="Scale:" VerticalOptions="Center" Margin="0,0,5,0"/>
                                    <Picker Grid.Column="2" x:Name="YellowScalePicker" SelectedIndexChanged="OnYellowScaleChanged" WidthRequest="60">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>1</x:String>
                                                <x:String>2</x:String>
                                                <x:String>3</x:String>
                                                <x:String>4</x:String>
                                                <x:String>5</x:String>
                                                <x:String>6</x:String>
                                                <x:String>7</x:String>
                                                <x:String>8</x:String>
                                                <x:String>9</x:String>
                                                <x:String>10</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Button Grid.Column="3" Text="Clear" Clicked="OnClearYellowChart" WidthRequest="80" Margin="10,0,0,0"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="YellowChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>
                    </Grid>

                    <!-- Current Charts Row 2 -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <!-- Red LED Current Chart -->
                        <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto">
                                    <Label Grid.Column="0" Text="Red LED Current (mA)" FontAttributes="Bold" FontSize="16"/>
                                    <Label Grid.Column="1" Text="Scale:" VerticalOptions="Center" Margin="0,0,5,0"/>
                                    <Picker Grid.Column="2" x:Name="RedScalePicker" SelectedIndexChanged="OnRedScaleChanged" WidthRequest="60">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>1</x:String>
                                                <x:String>2</x:String>
                                                <x:String>3</x:String>
                                                <x:String>4</x:String>
                                                <x:String>5</x:String>
                                                <x:String>6</x:String>
                                                <x:String>7</x:String>
                                                <x:String>8</x:String>
                                                <x:String>9</x:String>
                                                <x:String>10</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Button Grid.Column="3" Text="Clear" Clicked="OnClearRedChart" WidthRequest="80" Margin="10,0,0,0"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="RedChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>

                        <!-- Green LED Current Chart -->
                        <Frame Grid.Column="1" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto">
                                    <Label Grid.Column="0" Text="Green LED Current (mA)" FontAttributes="Bold" FontSize="16"/>
                                    <Label Grid.Column="1" Text="Scale:" VerticalOptions="Center" Margin="0,0,5,0"/>
                                    <Picker Grid.Column="2" x:Name="GreenScalePicker" SelectedIndexChanged="OnGreenScaleChanged" WidthRequest="60">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>1</x:String>
                                                <x:String>2</x:String>
                                                <x:String>3</x:String>
                                                <x:String>4</x:String>
                                                <x:String>5</x:String>
                                                <x:String>6</x:String>
                                                <x:String>7</x:String>
                                                <x:String>8</x:String>
                                                <x:String>9</x:String>
                                                <x:String>10</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Button Grid.Column="3" Text="Clear" Clicked="OnClearGreenChart" WidthRequest="80" Margin="10,0,0,0"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="GreenChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>
                    </Grid>

                    <!-- Battery Current Chart (Charge/Discharge) -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Frame Grid.Column="0" BorderColor="Gray" CornerRadius="5" Padding="10">
                            <Grid RowSpacing="5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="300"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto,Auto">
                                    <Label Grid.Column="0" Text="Battery Current (+ Charging, - Discharging)" FontAttributes="Bold" FontSize="16"/>
                                    <Label Grid.Column="1" Text="Scale:" VerticalOptions="Center" Margin="0,0,5,0"/>
                                    <Picker Grid.Column="2" x:Name="BatteryCurrentScalePicker" SelectedIndexChanged="OnBatteryCurrentScaleChanged" WidthRequest="60">
                                        <Picker.ItemsSource>
                                            <x:Array Type="{x:Type x:String}">
                                                <x:String>1</x:String>
                                                <x:String>2</x:String>
                                                <x:String>3</x:String>
                                                <x:String>4</x:String>
                                                <x:String>5</x:String>
                                                <x:String>6</x:String>
                                                <x:String>7</x:String>
                                                <x:String>8</x:String>
                                                <x:String>9</x:String>
                                                <x:String>10</x:String>
                                            </x:Array>
                                        </Picker.ItemsSource>
                                    </Picker>
                                    <Button Grid.Column="3" Text="Clear" Clicked="OnClearBatteryCurrentChart" WidthRequest="80" Margin="10,0,0,0"/>
                                </Grid>
                                <lvc:CartesianChart Grid.Row="1" x:Name="BatteryCurrentChart" BackgroundColor="#1A1A1A"/>
                            </Grid>
                        </Frame>
                    </Grid>
                </VerticalStackLayout>
            </ScrollView>
        </Grid>
        <!-- End Graph View -->

    </Grid>

</ContentPage>
